generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model LoteIngresso {
  id_lote     String   @id @default(uuid())
  id_evento   String
  nome        String
  preco       String
  quantidade  String
  qtd_vendida String
  data_inicio DateTime
  data_fim    DateTime
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  ingressos   Ingresso[]
}

model Ingresso {
  id_ingresso String   @id @default(uuid())
  id_lote     String
  id_usuario  String
  codigo_qr   String
  status      String
  checkin_em  DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  lote        LoteIngresso      @relation(fields: [id_lote], references: [id_lote])
  pagamento   PagamentoIngresso?
}

model PagamentoIngresso {
  id_pagamento String   @id @default(uuid())
  id_ingresso  String
  metodo       String
  status       String
  valor        String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  ingresso     Ingresso @relation(fields: [id_ingresso], references: [id_ingresso])
}